# 风险内容红线规范文档

> **版本**: v1.0.0  
> **最后更新**: 2024-11-18

## 1. 概述

本文档定义了AI能力交易平台的内容审核规范、敏感信息过滤规则、防爬虫策略和数据安全要求。

## 2. 内容审核规范

### 2.1 禁止内容

#### 2.1.1 违法违规内容

- 违反国家法律法规的内容
- 政治敏感内容
- 色情、暴力、恐怖主义内容
- 赌博、诈骗相关内容
- 毒品相关内容

#### 2.1.2 不当内容

- 恶意攻击、诽谤、侮辱他人
- 歧视性言论（种族、性别、宗教等）
- 虚假信息、谣言
- 垃圾广告、恶意营销
- 恶意代码、病毒链接

### 2.2 内容审核流程

#### 2.2.1 自动审核

1. **关键词过滤**: 使用敏感词库进行初步过滤
2. **AI内容识别**: 使用AI模型识别违规内容
3. **图片审核**: 识别违规图片内容
4. **链接检测**: 检测恶意链接

#### 2.2.2 人工审核

- 自动审核标记的内容需要人工复核
- 用户举报的内容需要人工审核
- 高风险内容必须人工审核

### 2.3 审核规则

#### 2.3.1 工具审核

- 工具名称、描述不能包含敏感词
- 工具功能不能涉及违法违规内容
- 工具链接必须安全可靠

#### 2.3.2 需求审核

- 需求描述不能包含敏感信息
- 需求不能涉及违法违规业务
- 悬赏金额必须合理

#### 2.3.3 项目审核

- 项目描述必须真实
- 项目成果数据必须可验证
- 项目不能涉及敏感业务

#### 2.3.4 评论审核

- 评论内容不能包含攻击性言论
- 评论不能包含广告信息
- 评论不能包含恶意链接

## 3. 敏感信息过滤

### 3.1 个人信息保护

#### 3.1.1 禁止公开的信息

- 身份证号码
- 银行卡号
- 手机号码（完整）
- 邮箱地址（部分场景）
- 家庭住址
- 密码、密钥

#### 3.1.2 信息脱敏规则

```typescript
// 手机号脱敏
function maskPhone(phone: string): string {
  return phone.replace(/(\d{3})\d{4}(\d{4})/, '$1****$2');
}

// 邮箱脱敏
function maskEmail(email: string): string {
  const [name, domain] = email.split('@');
  return `${name.substring(0, 2)}***@${domain}`;
}

// 身份证脱敏
function maskIdCard(idCard: string): string {
  return idCard.replace(/(\d{6})\d{8}(\d{4})/, '$1********$2');
}
```

### 3.2 企业信息保护

#### 3.2.1 禁止公开的信息

- 内部系统账号密码
- API密钥、Token
- 数据库连接信息
- 服务器IP地址
- 内部业务数据

#### 3.2.2 信息过滤规则

- 自动检测并过滤敏感配置信息
- 禁止上传包含敏感信息的文件
- 代码审查时检查是否泄露敏感信息

## 4. 防爬虫策略

### 4.1 技术防护

#### 4.1.1 速率限制

```typescript
// 使用 @nestjs/throttler
@Throttle(10, 60) // 每分钟10次请求
@Get('tools')
async findAll() {
  // ...
}
```

#### 4.1.2 IP限制

- 单IP请求频率限制
- 异常IP自动封禁
- IP白名单机制

#### 4.1.3 User-Agent检测

- 检测异常User-Agent
- 要求合法浏览器访问
- 禁止爬虫工具访问

### 4.2 验证机制

#### 4.2.1 验证码

- 高频操作需要验证码
- 登录、注册需要验证码
- 敏感操作需要验证码

#### 4.2.2 Token验证

- API请求需要Token
- Token有效期限制
- Token刷新机制

### 4.3 数据保护

#### 4.3.1 数据加密

- 敏感数据加密存储
- 传输过程使用HTTPS
- API响应不包含敏感信息

#### 4.3.2 数据脱敏

- 列表接口返回脱敏数据
- 详情接口需要权限验证
- 批量导出需要审核

## 5. 数据安全规范

### 5.1 数据分类

#### 5.1.1 公开数据

- 工具基本信息（名称、描述）
- 项目基本信息（标题、摘要）
- 用户公开信息（昵称、部门）

#### 5.1.2 内部数据

- 用户详细信息
- 工具使用统计
- 项目详细数据

#### 5.1.3 敏感数据

- 用户密码（加密存储）
- 支付信息
- 系统配置信息

### 5.2 数据访问控制

#### 5.2.1 权限控制

```typescript
// 角色权限
enum Role {
  USER = 'user',           // 普通用户
  DEPT_ADMIN = 'dept_admin', // 部门管理员
  ADMIN = 'admin',         // 平台管理员
}

// 权限检查
@Roles(Role.ADMIN)
@UseGuards(RolesGuard)
@Get('admin/stats')
async getStats() {
  // 仅管理员可访问
}
```

#### 5.2.2 数据隔离

- 用户只能访问自己的数据
- 部门数据隔离
- 管理员数据隔离

### 5.3 数据备份

#### 5.3.1 备份策略

- 每日自动备份
- 备份保留30天
- 异地备份存储

#### 5.3.2 恢复测试

- 每月恢复测试
- 备份完整性验证
- 恢复流程文档

## 6. 合规要求

### 6.1 法律法规遵循

- 《网络安全法》
- 《数据安全法》
- 《个人信息保护法》
- 《互联网信息服务管理办法》

### 6.2 隐私政策

- 明确数据收集范围
- 说明数据使用目的
- 提供数据删除机制
- 用户同意机制

### 6.3 用户协议

- 明确平台规则
- 说明违规后果
- 用户权利和义务

## 7. 监控和告警

### 7.1 内容监控

- 实时监控违规内容
- 自动标记可疑内容
- 告警通知审核人员

### 7.2 安全监控

- 异常访问监控
- 攻击行为检测
- 数据泄露检测

### 7.3 告警机制

- 高风险内容立即告警
- 安全事件实时告警
- 系统异常及时告警

## 8. 应急响应

### 8.1 违规内容处理

1. **自动处理**: 严重违规内容自动删除
2. **人工审核**: 可疑内容人工审核
3. **用户通知**: 处理结果通知用户
4. **申诉机制**: 提供申诉渠道

### 8.2 安全事件响应

1. **发现**: 及时发现问题
2. **隔离**: 隔离受影响系统
3. **修复**: 修复安全问题
4. **恢复**: 恢复系统服务
5. **复盘**: 事件复盘总结

## 9. 检查清单

- [ ] 内容审核规则明确
- [ ] 敏感信息过滤实现
- [ ] 防爬虫策略实施
- [ ] 数据安全措施到位
- [ ] 权限控制完善
- [ ] 数据备份机制
- [ ] 合规要求满足
- [ ] 监控告警配置
- [ ] 应急响应流程
- [ ] 用户协议完善

---

**相关文档**:
- [安全开发规范](./14-安全开发规范.md)
- [数据管理规范](./18-数据管理规范.md)
- [日志与监控规范](./15-日志与监控规范.md)


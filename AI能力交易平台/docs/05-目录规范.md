# 目录规范文档

> **版本**: v1.0.0  
> **最后更新**: 2024-11-18

## 1. 概述

本文档定义了AI能力交易平台前后端项目的目录结构规范、文件命名规范和模块划分原则。

## 2. 前端目录结构

### 2.1 根目录

```
frontend/
├── public/                 # 静态资源
│   ├── images/            # 图片资源
│   ├── favicon.ico        # 网站图标
│   └── robots.txt         # 爬虫规则
├── src/                   # 源代码
│   ├── assets/            # 资源文件
│   │   ├── images/       # 图片
│   │   ├── fonts/         # 字体
│   │   └── styles/        # 样式文件
│   ├── components/        # 组件
│   │   ├── ui/           # UI基础组件
│   │   ├── features/     # 功能组件
│   │   └── layouts/      # 布局组件
│   ├── pages/             # 页面组件
│   ├── hooks/             # 自定义Hooks
│   ├── lib/               # 工具库
│   │   ├── api/          # API调用
│   │   ├── utils/        # 工具函数
│   │   └── constants/    # 常量定义
│   ├── stores/            # 状态管理
│   ├── types/             # TypeScript类型
│   ├── App.tsx            # 根组件
│   ├── main.tsx           # 入口文件
│   └── index.css          # 全局样式
├── docs/                  # 文档
├── .env.example           # 环境变量示例
├── .gitignore            # Git忽略文件
├── index.html             # HTML模板
├── package.json           # 依赖配置
├── tsconfig.json          # TypeScript配置
├── vite.config.ts         # Vite配置
└── README.md              # 项目说明
```

### 2.2 src目录详解

#### components/ - 组件目录

```
components/
├── ui/                    # UI基础组件（Radix UI封装）
│   ├── button.tsx
│   ├── input.tsx
│   ├── card.tsx
│   └── ...
├── features/              # 功能组件
│   ├── ToolMarketplace.tsx
│   ├── DemandMarketplace.tsx
│   ├── ProjectShowcase.tsx
│   └── UserCenter.tsx
└── layouts/               # 布局组件
    ├── Header.tsx
    ├── Footer.tsx
    └── Sidebar.tsx
```

#### lib/ - 工具库目录

```
lib/
├── api/                   # API调用
│   ├── client.ts         # API客户端
│   ├── tools.ts          # 工具相关API
│   ├── demands.ts        # 需求相关API
│   └── projects.ts       # 项目相关API
├── utils/                 # 工具函数
│   ├── format.ts         # 格式化函数
│   ├── validation.ts     # 验证函数
│   └── helpers.ts        # 辅助函数
└── constants/            # 常量定义
    ├── routes.ts         # 路由常量
    ├── categories.ts     # 分类常量
    └── status.ts         # 状态常量
```

#### types/ - 类型定义目录

```
types/
├── api.ts                # API类型
├── tool.ts               # 工具类型
├── demand.ts             # 需求类型
├── project.ts            # 项目类型
└── user.ts               # 用户类型
```

## 3. 后端目录结构

### 3.1 根目录

```
backend/
├── src/                   # 源代码
│   ├── main.ts           # 应用入口
│   ├── app.module.ts     # 根模块
│   ├── common/           # 公共模块
│   ├── config/           # 配置文件
│   ├── modules/          # 业务模块
│   └── shared/           # 共享模块
├── prisma/                # Prisma相关
│   ├── schema.prisma     # Schema定义
│   └── migrations/       # 数据库迁移
├── test/                  # 测试文件
│   ├── unit/             # 单元测试
│   ├── integration/     # 集成测试
│   └── e2e/              # E2E测试
├── docs/                  # 文档
├── .env.example          # 环境变量示例
├── .gitignore           # Git忽略文件
├── nest-cli.json         # NestJS配置
├── tsconfig.json         # TypeScript配置
├── package.json          # 依赖配置
└── README.md             # 项目说明
```

### 3.2 src目录详解

#### common/ - 公共模块

```
common/
├── decorators/           # 自定义装饰器
│   ├── current-user.decorator.ts
│   └── roles.decorator.ts
├── filters/              # 异常过滤器
│   └── http-exception.filter.ts
├── guards/               # 守卫
│   ├── jwt-auth.guard.ts
│   └── roles.guard.ts
├── interceptors/         # 拦截器
│   ├── logging.interceptor.ts
│   └── transform.interceptor.ts
├── pipes/                 # 管道
│   └── validation.pipe.ts
└── utils/                 # 工具函数
    ├── hash.util.ts
    └── date.util.ts
```

#### modules/ - 业务模块

```
modules/
├── auth/                 # 认证模块
│   ├── auth.module.ts
│   ├── auth.controller.ts
│   ├── auth.service.ts
│   └── strategies/
│       └── jwt.strategy.ts
├── users/                # 用户模块
│   ├── users.module.ts
│   ├── users.controller.ts
│   ├── users.service.ts
│   └── dto/
│       ├── create-user.dto.ts
│       └── update-user.dto.ts
├── tools/                # 工具模块
├── demands/              # 需求模块
├── projects/             # 项目模块
└── notifications/        # 通知模块
```

#### shared/ - 共享模块

```
shared/
├── dto/                  # 共享DTO
│   └── pagination.dto.ts
├── entities/             # 实体类型
│   └── base.entity.ts
└── interfaces/           # 接口定义
    └── paginated-result.interface.ts
```

## 4. 文件命名规范

### 4.1 前端文件命名

#### 组件文件

- **PascalCase**: `ToolMarketplace.tsx`
- **功能组件**: `UserProfile.tsx`
- **UI组件**: `Button.tsx`, `Input.tsx`

#### 工具文件

- **camelCase**: `formatDate.ts`, `validateEmail.ts`
- **常量文件**: `constants.ts`, `routes.ts`

#### 类型文件

- **camelCase**: `tool.types.ts`, `user.types.ts`

### 4.2 后端文件命名

#### 模块文件

- **kebab-case**: `users.module.ts`
- **控制器**: `users.controller.ts`
- **服务**: `users.service.ts`
- **DTO**: `create-user.dto.ts`
- **实体**: `user.entity.ts`

#### 测试文件

- **spec后缀**: `users.service.spec.ts`

## 5. 模块划分原则

### 5.1 前端模块划分

#### 按功能划分

- `ToolMarketplace`: 工具广场
- `DemandMarketplace`: 需求广场
- `ProjectShowcase`: 项目广场
- `UserCenter`: 用户中心

#### 按层级划分

- `components/ui/`: UI基础组件
- `components/features/`: 功能组件
- `components/layouts/`: 布局组件

### 5.2 后端模块划分

#### 按业务领域划分

- `auth`: 认证授权
- `users`: 用户管理
- `tools`: 工具管理
- `demands`: 需求管理
- `projects`: 项目管理

#### 按技术层次划分

- `common/`: 公共技术模块
- `modules/`: 业务模块
- `shared/`: 共享业务模块

## 6. 导入路径规范

### 6.1 前端导入

#### 绝对路径导入

```typescript
// 使用 @ 别名
import { Button } from '@/components/ui/button';
import { formatDate } from '@/lib/utils/format';
import type { Tool } from '@/types/tool';
```

#### 相对路径导入

```typescript
// 同级或子级目录
import { Card } from './ui/card';
import { ToolCard } from '../features/ToolCard';
```

### 6.2 后端导入

#### 模块导入

```typescript
// 跨模块导入
import { UsersService } from '../users/users.service';

// 公共模块导入
import { CurrentUser } from '../../common/decorators/current-user.decorator';

// 共享模块导入
import { PaginationDto } from '../../shared/dto/pagination.dto';
```

## 7. 配置文件规范

### 7.1 前端配置

- `vite.config.ts`: Vite构建配置
- `tsconfig.json`: TypeScript配置
- `tailwind.config.js`: Tailwind CSS配置
- `.env`: 环境变量（不提交到Git）

### 7.2 后端配置

- `nest-cli.json`: NestJS CLI配置
- `tsconfig.json`: TypeScript配置
- `prisma/schema.prisma`: 数据库Schema
- `.env`: 环境变量（不提交到Git）

## 8. 文档目录

```
docs/
├── 00-总文档索引.md
├── 01-API规范.md
├── 02-设计规范.md
├── 03-后端代码规范.md
├── 04-风险内容红线规范.md
├── 05-目录规范.md
└── ...
```

## 9. 测试目录

### 9.1 前端测试

```
src/
├── components/
│   └── ToolMarketplace.test.tsx
├── lib/
│   └── utils/
│       └── format.test.ts
└── __tests__/            # 测试工具
    └── setup.ts
```

### 9.2 后端测试

```
test/
├── unit/                 # 单元测试
│   └── users.service.spec.ts
├── integration/         # 集成测试
│   └── tools.e2e-spec.ts
└── fixtures/            # 测试数据
    └── users.fixture.ts
```

## 10. 检查清单

- [ ] 目录结构清晰
- [ ] 文件命名规范统一
- [ ] 模块划分合理
- [ ] 导入路径规范
- [ ] 配置文件完整
- [ ] 文档目录规范
- [ ] 测试目录规范

---

**相关文档**:
- [后端代码规范](./03-后端代码规范.md)
- [前端开发补充规范](./16-前端开发补充规范.md)

